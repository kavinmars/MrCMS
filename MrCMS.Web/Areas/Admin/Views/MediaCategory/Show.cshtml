@using MrCMS.Entities.Documents.Media
@using MrCMS.Helpers
@using MrCMS.Paging
@model MrCMS.Models.MediaCategorySearchModel
@{
    var mediaCategory = ViewData["media-category"] as MediaCategory;
    ViewBag.Title = mediaCategory.Name;

    Html.IncludeScript("~/Areas/Admin/Content/Scripts/mrcms/media-uploader.js");
    Html.IncludeScript("~/Areas/Admin/Content/Scripts/mrcms/media-category.js");
    ViewData["MediaCategory"] = mediaCategory;
    var pagedList = ViewData["files"] as IPagedList<MediaFile>;
    
}
@if (TempData["saved"] != null)
{
    <div class="alert alert-success">
        <button type="button" class="close" data-dismiss="alert">×</button>
        @TempData["saved"]
    </div>
}
<form action="@Url.Action("Show", "MediaCategory", new { mediaCategory.Id })" method="get">


    <fieldset>
        <legend>@mediaCategory.Name
            <span class="btn-group  display-inline  pull-right">
                <a href="@Url.Action("SortFiles", "MediaCategory", new { id = mediaCategory.Id })" class="btn ">Sort</a>
                @if (mediaCategory.CanDelete)
                {
                    <a href="@Url.Action("Delete", "MediaCategory", new { id = mediaCategory.Id })" class="btn btn-danger" data-toggle="fb-modal">Delete</a>
                }
                <a href="@Url.Action("Edit", "MediaCategory", new { id = mediaCategory.Id })" class="btn" data-toggle="fb-modal">Edit</a>

                <input type="submit" value="Search" class="btn btn-primary" />
            </span>
        </legend>
    </fieldset>
    @Html.LabelFor(x => x.SearchText)
    @Html.TextBoxFor(x => x.SearchText)
</form>
@{ Html.RenderPartial("Upload", mediaCategory); }
@{ Html.RenderPartial("ShowFiles", pagedList); }
